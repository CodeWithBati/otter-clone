(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{2013:function(e,a,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return o(2837)}])},1119:function(e,a,o){"use strict";var s=o(5893);o(7294),a.Z=()=>(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-opacity-10 backdrop-filter backdrop-blur-md shadow-md",children:(0,s.jsxs)("div",{className:" flex flex-col items-center",children:[(0,s.jsx)("div",{className:"animate-bounce w-[300px] h-[173px] bg-cover bg-[url('/images/loading3.png')]"}),(0,s.jsx)("p",{className:"text-8xl font-goodunicorn",children:"Loading"})]})})},2837:function(e,a,o){"use strict";o.r(a),o.d(a,{__N_SSP:function(){return w},default:function(){return C}});var s=o(5893),l=o(2859),t=o(6664),d=o(7294),c=o(1163),r=o(4853),i=o(7066);let n=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","C\xf4te d'Ivoire","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine State","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],m=[{code:"AED",symbol:"د.إ"},{code:"AFN",symbol:"؋"},{code:"ALL",symbol:"L"},{code:"AMD",symbol:"֏"},{code:"ANG",symbol:"ƒ"},{code:"AOA",symbol:"Kz"},{code:"ARS",symbol:"$"},{code:"AUD",symbol:"A$"},{code:"AWG",symbol:"ƒ"},{code:"AZN",symbol:"₼"},{code:"BAM",symbol:"KM"},{code:"BBD",symbol:"Bds$"},{code:"BDT",symbol:"৳"},{code:"BGN",symbol:"лв"},{code:"BHD",symbol:"ب.د"},{code:"BIF",symbol:"Fr"},{code:"BMD",symbol:"$"},{code:"BND",symbol:"B$"},{code:"BOB",symbol:"Bs"},{code:"BRL",symbol:"R$"},{code:"BSD",symbol:"$"},{code:"BTN",symbol:"Nu."},{code:"BWP",symbol:"P"},{code:"BYN",symbol:"Br"},{code:"BZD",symbol:"BZ$"},{code:"CAD",symbol:"C$"},{code:"CDF",symbol:"Fr"},{code:"CHF",symbol:"CHF"},{code:"CLP",symbol:"$"},{code:"CNY",symbol:"\xa5"},{code:"COP",symbol:"$"},{code:"CRC",symbol:"₡"},{code:"CUP",symbol:"₱"},{code:"CVE",symbol:"$"},{code:"CZK",symbol:"Kč"},{code:"DJF",symbol:"Fr"},{code:"DKK",symbol:"kr"},{code:"DOP",symbol:"RD$"},{code:"DZD",symbol:"د.ج"},{code:"EGP",symbol:"\xa3"},{code:"ERN",symbol:"Nkf"},{code:"ETB",symbol:"Br"},{code:"EUR",symbol:"€"},{code:"FJD",symbol:"FJ$"},{code:"FKP",symbol:"\xa3"},{code:"FOK",symbol:"kr"},{code:"GBP",symbol:"\xa3"},{code:"GEL",symbol:"₾"},{code:"GHS",symbol:"₵"},{code:"GIP",symbol:"\xa3"},{code:"GMD",symbol:"D"},{code:"GNF",symbol:"Fr"},{code:"GTQ",symbol:"Q"},{code:"GYD",symbol:"$"},{code:"HKD",symbol:"HK$"},{code:"HNL",symbol:"L"},{code:"HRK",symbol:"kn"},{code:"HTG",symbol:"G"},{code:"HUF",symbol:"Ft"},{code:"IDR",symbol:"Rp"},{code:"ILS",symbol:"₪"},{code:"INR",symbol:"₹"},{code:"IQD",symbol:"ع.د"},{code:"IRR",symbol:"﷼"},{code:"ISK",symbol:"kr"},{code:"JMD",symbol:"J$"},{code:"JOD",symbol:"د.ا"},{code:"JPY",symbol:"\xa5"},{code:"KES",symbol:"KSh"},{code:"KGS",symbol:"лв"},{code:"KHR",symbol:"៛"},{code:"KID",symbol:"A$"},{code:"KMF",symbol:"Fr"},{code:"KRW",symbol:"₩"},{code:"KWD",symbol:"د.ك"},{code:"KYD",symbol:"CI$"},{code:"KZT",symbol:"₸"},{code:"LAK",symbol:"₭"},{code:"LBP",symbol:"ل.ل"},{code:"LKR",symbol:"Rs"},{code:"LRD",symbol:"L$"},{code:"LSL",symbol:"L"},{code:"LYD",symbol:"د.ل"},{code:"MAD",symbol:"د.م."},{code:"MDL",symbol:"L"},{code:"MGA",symbol:"Ar"},{code:"MKD",symbol:"ден"},{code:"MMK",symbol:"Ks"},{code:"MNT",symbol:"₮"},{code:"MOP",symbol:"MOP$"},{code:"MRU",symbol:"UM"},{code:"MUR",symbol:"₨"},{code:"MVR",symbol:"MVR"},{code:"MWK",symbol:"MK"},{code:"MXN",symbol:"$"},{code:"MYR",symbol:"RM"},{code:"MZN",symbol:"MT"},{code:"NAD",symbol:"N$"},{code:"NGN",symbol:"₦"},{code:"NIO",symbol:"C$"},{code:"NOK",symbol:"kr"},{code:"NPR",symbol:"Rs"},{code:"NZD",symbol:"NZ$"},{code:"OMR",symbol:"ر.ع."},{code:"PAB",symbol:"B/."},{code:"PEN",symbol:"S/."},{code:"PGK",symbol:"K"},{code:"PHP",symbol:"₱"},{code:"PKR",symbol:"₨"},{code:"PLN",symbol:"zł"},{code:"PYG",symbol:"Gs"},{code:"QAR",symbol:"ر.ق"},{code:"RON",symbol:"lei"},{code:"RSD",symbol:"дин."},{code:"RUB",symbol:"₽"},{code:"RWF",symbol:"Fr"},{code:"SAR",symbol:"ر.س"},{code:"SBD",symbol:"$"},{code:"SCR",symbol:"₨"},{code:"SDG",symbol:"ج.س."},{code:"SEK",symbol:"kr"},{code:"SGD",symbol:"S$"},{code:"SHP",symbol:"\xa3"},{code:"SLL",symbol:"Le"},{code:"SOS",symbol:"S"},{code:"SRD",symbol:"$"},{code:"SSP",symbol:"\xa3"},{code:"STN",symbol:"Db"},{code:"SYP",symbol:"ل.س"},{code:"SZL",symbol:"E"},{code:"THB",symbol:"฿"},{code:"TJS",symbol:"ЅМ"},{code:"TMT",symbol:"m"},{code:"TND",symbol:"د.ت"},{code:"TOP",symbol:"T$"},{code:"TRY",symbol:"₺"},{code:"TTD",symbol:"TT$"},{code:"TVD",symbol:"T$"},{code:"TZS",symbol:"TSh"},{code:"UAH",symbol:"₴"},{code:"UGX",symbol:"USh"},{code:"USD",symbol:"$"},{code:"UYU",symbol:"$U"},{code:"UZS",symbol:"лв"},{code:"VES",symbol:"Bs.S"},{code:"VND",symbol:"₫"},{code:"VUV",symbol:"Vt"},{code:"WST",symbol:"WS$"},{code:"XAF",symbol:"Fr"},{code:"XAG",symbol:"XAG"},{code:"XAU",symbol:"XAU"},{code:"XCD",symbol:"$"},{code:"XDR",symbol:"XDR"},{code:"XOF",symbol:"Fr"},{code:"XPF",symbol:"₣"},{code:"YER",symbol:"ر.ي"},{code:"ZAR",symbol:"R"},{code:"ZMW",symbol:"ZK"},{code:"ZWL",symbol:"Z$"}];var b=o(4965),y=o(1119),u=o(8630),x=o(8773),h=o(2029),p=()=>(0,s.jsx)("div",{className:"border border-blue-300 shadow rounded-md p-4 w-full mx-auto",children:(0,s.jsxs)("div",{className:"animate-pulse flex space-x-4",children:[(0,s.jsx)("div",{className:"rounded-full bg-slate-200 h-10 w-10"}),(0,s.jsxs)("div",{className:"flex-1 space-y-6 py-1",children:[(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded col-span-2"}),(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded col-span-1"})]}),(0,s.jsx)("div",{className:"h-2 bg-slate-200 rounded"})]})]})]})});let N=e=>{let a=e.replace(/[^\d]/g,""),o=a.length;return o<4?a:o<7?"(".concat(a.slice(0,3),") ").concat(a.slice(3)):"(".concat(a.slice(0,3),") ").concat(a.slice(3,6),"-").concat(a.slice(6,10))};var f=o(8428);let g=new(o.n(f)()).Agent({rejectUnauthorized:!1}),j=async e=>{let{result:a,convertedTotalPrice:o,cart:s,address:l,currency:t}=e,d=Number(o);return await i.Z.post("".concat("https://book-store-backend-gre-1.onrender.com","/api/transactions"),{source_id:a.token,amount:100*d,currency:t,book:s,idempotency_key:new Date().getTime().toString(),address:l},{httpsAgent:g})};var S=()=>{let e=(0,c.useRouter)(),[a,o]=(0,d.useState)(!1),[l,t]=(0,d.useState)(!1),{isLoading:f,setLoading:g}=(0,b.r)(),[S,v]=(0,d.useState)(!1),{cart:w,setCart:C}=(0,u.useCart)(),D=w.reduce((e,a)=>e+a.price,0),[k,A]=(0,d.useState)(null),M=(0,d.useRef)(!1),[B,R]=(0,d.useState)(!1),[P,K]=(0,d.useState)("USD"),[T,L]=(0,d.useState)([]),[G,E]=(0,d.useState)({}),[F,$]=(0,d.useState)({firstName:"",lastName:"",address:"",city:"",state:"",zipCode:"",country:"",email:"",phone:""}),[U,I]=(0,d.useState)({}),z=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);(0,d.useEffect)(()=>{(async()=>{try{let e=(await i.Z.get("https://api.exchangerate-api.com/v4/latest/USD")).data.rates;E(e);let a=Object.keys(e);L(a)}catch(e){console.error("Error fetching exchange rates:",e)}})()},[]);let Z=(D*(G[P]||1)).toFixed(2),H=async e=>{e.preventDefault();let a={};z(F.email)||(a.email="Invalid email"),F.email||(a.email="Email is required"),F.firstName||(a.firstName="First Name is required"),F.lastName||(a.lastName="Last Name is required"),F.address||(a.address="Address is required"),F.city||(a.city="City is required"),F.state||(a.state="State is required"),F.zipCode||(a.zipCode="ZIP code is required"),F.country||(a.country="Country is required"),F.phone||(a.phone="Phone number is required"),S||(a.captcha="Please verify the captcha"),I(a),Object.keys(a).length>0||_(e)},O=e=>{let a;C(a=w.filter(a=>a.id!==e)),localStorage.setItem("cart",JSON.stringify(a))};(0,d.useEffect)(()=>{(async()=>{try{let e=await (0,h.P)("sandbox-sq0idb-z0wtahI6NX5owVtcKYtzCA","L41TC9VJBVGHJ"),a=await (null==e?void 0:e.card());!M.current&&a&&(null==a||a.attach("#card-container"),M.current=!0),A(a),R(!0)}catch(e){console.error("Square Payment setup error:",e)}})()},[]);let _=async e=>{if(e.preventDefault(),!B||!k){console.error("card not attached yet");return}let a=await k.tokenize();try{if("OK"===a.status){let e=await j({result:a,convertedTotalPrice:Z,cart:w,address:F,currency:P});console.log("Payment Successful:",e.data),C([])}else console.error("Tokenization Failed:",a.errors)}catch(e){console.error("Payment Error:",e)}};return(0,s.jsxs)("div",{className:"bg-gradient-to-r w-full  min-h-screen p-8",children:[f&&(0,s.jsx)(y.Z,{}),(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center w-full gap-10 md:flex-row mt-12 md:gap-24 text-white",children:[(0,s.jsxs)("div",{className:"w-full p-6 md:w-1/2 mt-10 flex flex-col gap-3 bg-white bg-opacity-20 backdrop-filter backdrop-blur-lg rounded-md shadow-xl",children:[(0,s.jsx)("p",{className:"font-whale text-5xl mb-6",children:"Book Order"}),w.length>0?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-whale text-4xl mb-4",children:"Your Enchanted Books"}),(0,s.jsx)("div",{className:"space-y-4",children:w.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-2 p-3 font-whale text-sm md:text-xl w-full justify-between items-center bg-white bg-opacity-30 rounded-lg",children:[(0,s.jsx)("div",{className:"w-1/12",children:(0,s.jsx)("p",{children:a+1})}),(0,s.jsx)("div",{className:"w-4/12",children:(0,s.jsx)("p",{children:e.title})}),(0,s.jsx)("div",{className:"w-2/12",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"bg-yellow-400 rounded-md flex justify-center items-center p-1",children:(0,s.jsx)(x.hWE,{className:"text-sm"})}),(0,s.jsx)("p",{children:e.price})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-1 w-2/12",children:[e.dated?(0,s.jsx)("div",{className:"bg-blue-500 rounded-md flex justify-center items-center p-1",children:(0,s.jsx)(x.l_A,{className:"text-sm"})}):(0,s.jsx)("div",{className:"bg-red-500 rounded-md flex justify-center items-center p-1",children:(0,s.jsx)(x.aHS,{className:"text-sm"})}),(0,s.jsx)("p",{children:"Dated"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 w-2/12",children:[e.signed?(0,s.jsx)("div",{className:"bg-blue-500 rounded-md flex justify-center items-center p-1",children:(0,s.jsx)(x.l_A,{className:"text-sm"})}):(0,s.jsx)("div",{className:"bg-red-500 rounded-md flex justify-center items-center p-1",children:(0,s.jsx)(x.aHS,{className:"text-sm"})}),(0,s.jsx)("p",{children:"Signed"})]}),(0,s.jsx)("div",{className:"w-1/12 flex justify-center",children:(0,s.jsx)(x.Xm5,{className:"cursor-pointer text-red-500 hover:text-red-700 transition-colors duration-200",onClick:()=>O(e.id)})})]},e.id))})]}):(0,s.jsx)("p",{className:"text-5xl font-whale",children:"Your cart is empty!"}),(0,s.jsxs)("div",{className:"flex gap-10 justify-center items-center mt-6 flex-col md:flex-row",children:[(0,s.jsxs)("div",{className:"text-5xl font-whale",children:["Total:"," ",m.map(e=>e.code===P&&e.symbol)," ",Z]}),(0,s.jsx)("div",{children:(0,s.jsx)("select",{value:P,onChange:e=>{K(e.target.value)},className:"w-full p-2 rounded-md focus:outline-none text-blue-600 focus:ring-2",children:T.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})})]})]}),(0,s.jsxs)("form",{onSubmit:H,className:"p-10 w-full md:w-1/2 bg-white bg-opacity-20 mt-10 backdrop-filter backdrop-blur-lg rounded-md shadow-xl",children:[(0,s.jsx)("div",{className:"flex flex-col items-center mb-4",children:(0,s.jsx)("p",{className:"font-whale text-2xl  mt-2",children:"Fill in Your Contact Details"})}),!M.current&&(0,s.jsx)(p,{}),(0,s.jsx)("div",{id:"card-container",className:"mb-4"}),(0,s.jsx)("div",{id:"card-errors",role:"alert",className:"text-red-500 text-sm mt-2"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block  font-whale mb-1",children:"Email Address"}),(0,s.jsx)("input",{id:"email",placeholder:"Your Magical Email",type:"text",onChange:e=>$({...F,email:e.target.value}),className:"w-full p-3 ".concat(U.email?"border-red-500":""," border-2 rounded-md text-black")}),U.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:U.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"firstName",className:"block  font-whale mb-1",children:"Enchanted Address"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:flex-wrap",children:[(0,s.jsx)("input",{id:"firstName",placeholder:U.firstName?U.firstName:"First Name",onChange:e=>$({...F,firstName:e.target.value}),type:"text",className:"flex-1 p-3 ".concat(U.firstName?"border-red-500":""," border-2 rounded-md text-black")}),(0,s.jsx)("input",{placeholder:U.lastName?U.lastName:"Last Name",type:"text",onChange:e=>$({...F,lastName:e.target.value}),className:"flex-1 p-3 ".concat(U.lastName?"border-red-500":""," border-2 rounded-md text-black")})]})]}),(0,s.jsx)("input",{placeholder:U.address?U.address:"Magical Address",type:"text",onChange:e=>$({...F,address:e.target.value}),className:"w-full p-3 ".concat(U.address?"border-red-500":""," border-2 rounded-md text-black")}),(0,s.jsx)("input",{placeholder:U.city?U.city:"Enchanted City",type:"text",onChange:e=>$({...F,city:e.target.value}),className:"w-full p-3 ".concat(U.city?"border-red-500":""," border-2 rounded-md text-black")}),(0,s.jsx)("input",{type:"tel",placeholder:U.phone?U.phone:"Wizard Phone",value:F.phone,onChange:e=>{let a=N(e.target.value);$({...F,phone:a})},className:"w-full p-3 ".concat(U.phone?"border-red-500":""," border-2 rounded-md text-black")}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 mt-2",children:[(0,s.jsxs)("select",{name:"country",onChange:e=>$({...F,country:e.target.value}),className:"flex-1 p-3 ".concat(U.country?"border-red-500":""," border-2 rounded-md text-black md:w-1/3"),children:[(0,s.jsx)("option",{value:"",children:"Select Magical Realm"}),n.map((e,a)=>(0,s.jsx)("option",{value:e,children:e},a))]}),(0,s.jsx)("input",{placeholder:U.state?U.state:"Mystical State",type:"text",onChange:e=>$({...F,state:e.target.value}),className:"flex-1 p-3 ".concat(U.state?"border-red-500":""," border-2 rounded-md text-black md:w-1/3")}),(0,s.jsx)("input",{placeholder:U.zipCode?U.zipCode:"Spell Code",type:"text",onChange:e=>$({...F,zipCode:e.target.value}),className:"flex-1 p-3 ".concat(U.zipCode?"border-red-500":""," border-2 rounded-md text-black md:w-1/3")})]})]}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(r.Z,{sitekey:"6Lf-1_YnAAAAAITU3282K32u13Zh218678l11",onChange:e=>{v(!!e)}})}),(0,s.jsxs)("div",{className:"flex justify-between mt-5",children:[(0,s.jsxs)("button",{className:"text-white text-center bg-blue-500 rounded-md flex gap-3 items-center text-lg md:text-xl duration-500 hover:scale-105 transition-colors cursor-pointer px-6 py-3 font-whale",onClick:a=>{a.preventDefault(),g(!0),e.push("/").then(()=>g(!1))},children:[(0,s.jsx)(x.x_l,{}),"Back"]}),(0,s.jsxs)("button",{type:"submit",className:"bg-blue-500 text-white py-3 px-6 flex gap-3 items-center rounded-md font-whale text-lg md:text-xl transition-all duration-500 transform hover:scale-105 ".concat(!S||a||U?"opacity-50 cursor-not-allowed":"opacity-100 cursor-pointer"),disabled:!l||a,children:[(0,s.jsx)(x.rI6,{}),a?"Processing...":"Checkout"]})]})]})]})]})};let v=(0,l.J)("pk_test_51PfkpkJ5qRIM6Ft9ZAh8EmsCfMOfc6Un6lY9I80xcGggYjHGwtEtJjjKGmIA9SBLwWUPmSohx36kgmgyMqjyQEsF00CV5kQ2Jw");var w=!0,C=()=>(0,s.jsx)("div",{className:"flex-col md:flex-row items-center justify-center text-white bg-gradient-to-br from-cyan-900 to-indigo-900 flex",children:(0,s.jsx)(t.Elements,{stripe:v,children:(0,s.jsx)(S,{})})})}},function(e){e.O(0,[138,888,774,179],function(){return e(e.s=2013)}),_N_E=e.O()}]);